<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live ETH Trading Chart</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 20px;
        }
        .stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            min-width: 150px;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
        }
        .stat-box:hover {
            background: #ddd;
        }
        .stat-box h3 {
            margin: 5px 0;
        }
        .chart-container {
            width: 100%;
            height: 500px;
        }
    </style>
</head>
<body>

    <!-- ETH Stats (Now on Top) -->
    <h2>Ethereum Growth Percentages</h2>
    <div class="stats">
        <div class="stat-box" onclick="loadChart('24H')"><h3>24H Change</h3><p id="change_24h">Loading...</p></div>
        <div class="stat-box" onclick="loadChart('7D')"><h3>7D Change</h3><p id="change_7d">Loading...</p></div>
        <div class="stat-box" onclick="loadChart('30D')"><h3>30D Change</h3><p id="change_30d">Loading...</p></div>
        <div class="stat-box" onclick="loadChart('1Y')"><h3>1Y Change</h3><p id="change_1y">Loading...</p></div>
        <div class="stat-box" onclick="loadChart('ALL')"><h3>All Time Change</h3><p id="change_all">Loading...</p></div>
    </div>

    <!-- TradingView Chart (Updates Dynamically) -->
    <h1 id="chart-title">Ethereum (ETH) - Live Trading Chart</h1>
    <div class="chart-container">
        <iframe id="tradingview-frame" src="https://www.tradingview.com/chart/?symbol=BINANCE:ETHUSDT" width="100%" height="500px"></iframe>
    </div>

    <script>
        const API_KEY = 'd13dfd2e-956f-4378-a40a-869530075659'; // Your CoinMarketCap API Key

        // Function to Fetch ETH Data from CoinMarketCap
        async function fetchETHData() {
            try {
                const response = await fetch(`https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=ETH&convert=USD`, {
                    headers: { 'X-CMC_PRO_API_KEY': API_KEY }
                });

                const data = await response.json();
                const quote = data.data.ETH.quote.USD;

                document.getElementById("change_24h").innerText = `${quote.percent_change_24h.toFixed(2)}%`;
                document.getElementById("change_7d").innerText = `${quote.percent_change_7d.toFixed(2)}%`;
                document.getElementById("change_30d").innerText = `${quote.percent_change_30d.toFixed(2)}%`;
                document.getElementById("change_1y").innerText = `${quote.percent_change_1y.toFixed(2)}%`;
                document.getElementById("change_all").innerText = "N/A"; // All-time % change not available from API

            } catch (error) {
                console.error("Error fetching ETH data:", error);
            }
        }

        fetchETHData();
        setInterval(fetchETHData, 60000); // Refresh every minute

        // Function to Load Different Chart Views
        function loadChart(timeframe) {
            let symbol = "BINANCE:ETHUSDT";
            let chartURL = "https://www.tradingview.com/chart/?symbol=" + symbol;
            let title = "Ethereum (ETH) - Live Trading Chart";

            switch(timeframe) {
                case '24H':
                    chartURL = `https://www.tradingview.com/chart/?symbol=${symbol}&interval=15`;
                    title = "Ethereum (ETH) - 24H Chart";
                    break;
                case '7D':
                    chartURL = `https://www.tradingview.com/chart/?symbol=${symbol}&interval=60`;
                    title = "Ethereum (ETH) - 7D Chart";
                    break;
                case '30D':
                    chartURL = `https://www.tradingview.com/chart/?symbol=${symbol}&interval=D`;
                    title = "Ethereum (ETH) - 30D Chart";
                    break;
                case '1Y':
                    chartURL = `https://www.tradingview.com/chart/?symbol=${symbol}&interval=W`;
                    title = "Ethereum (ETH) - 1Y Chart";
                    break;
                case 'ALL':
                    chartURL = `https://www.tradingview.com/chart/?symbol=${symbol}&interval=M`;
                    title = "Ethereum (ETH) - All Time Chart";
                    break;
            }

            document.getElementById("tradingview-frame").src = chartURL;
            document.getElementById("chart-title").innerText = title;
        }
    </script>

</body>
</html>
